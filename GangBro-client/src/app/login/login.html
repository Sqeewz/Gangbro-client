<div class="login-container">
    <div class="gang-login-box">
        <h2 class="gang-title">{{ mode === 'login' ? 'ENCRYPTION LOGIN' : 'BRAWLER ACCESS' }}</h2>

        <form (ngSubmit)="onSubmit()" [formGroup]="form" autocomplete="off" class="gang-form">
            <!-- Username -->
            <div class="input-group">
                <label>IDENTIFIER (USERNAME)</label>
                <input type="text" placeholder="AGENT_ID" formControlName="username"
                    (input)="updateErrorMessage('username')" maxlength="16" class="gang-input">
                @if (form.controls['username'].invalid && form.controls['username'].touched) {
                <span class="error-text">{{errorMessage.username()}}</span>
                }
            </div>

            <!-- Password -->
            <div class="input-group">
                <label>DECRYPTION KEY (PASSWORD)</label>
                <input type="password" placeholder="********" formControlName="password"
                    (input)="updateErrorMessage('password')" maxlength="20" class="gang-input">
                @if (form.controls['password'].invalid && form.controls['password'].touched) {
                <span class="error-text">{{errorMessage.password()}}</span>
                }
            </div>

            @if (mode === 'register') {
            <!-- Confirm Password -->
            <div class="input-group">
                <label>VERIFY KEY</label>
                <input type="password" placeholder="********" formControlName="confirm_password"
                    (input)="updateErrorMessage('confirm_password')" maxlength="20" class="gang-input">
                @if (form.controls['confirm_password'].invalid && form.controls['confirm_password'].touched) {
                <span class="error-text">{{errorMessage.confirm_password()}}</span>
                }
            </div>

            <!-- Display Name -->
            <div class="input-group">
                <label>CODENAME (DISPLAY NAME)</label>
                <input type="text" placeholder="The Brawler" formControlName="display_name"
                    (input)="updateErrorMessage('display_name')" class="gang-input">
                @if (form.controls['display_name'].invalid && form.controls['display_name'].touched) {
                <span class="error-text">{{errorMessage.display_name()}}</span>
                }
            </div>
            }

            <button type="submit" class="gang-btn full-width" [disabled]="!form.valid">
                {{ mode === 'login' ? 'AUTHORIZE' : 'INITIATE JOIN' }}
            </button>
        </form>

        @if(errorFromServer() !== '') {
        <div class="server-error">{{errorFromServer()}}</div>
        }

        <div class="login-footer">
            <div class="spacer"><span>OR</span></div>

            @if (mode === 'login') {
            <div class="toggle">UNREGISTERED UNIT? <span (click)="toggleMode()">CREATE ACCESS</span></div>
            } @else {
            <div class="toggle">ALREADY REGISTERED? <span (click)="toggleMode()">AUTHORIZE LOGIN</span></div>
            }
        </div>
    </div>
</div>